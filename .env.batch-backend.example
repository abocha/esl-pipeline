# Example env for local/dev with docker-compose.batch-backend.yml
# NOT FOR PRODUCTION. Override in staging/prod with secure values.

NODE_ENV=development

# HTTP
BATCH_BACKEND_HTTP_PORT=8080

# Local filesystem uploads (shared volume path)
FILESYSTEM_UPLOAD_DIR=/app/uploads

# Postgres (used for job metadata)
PG_ENABLED=true
PG_HOST=postgres
PG_PORT=5432
PG_USER=esl
PG_PASSWORD=esl
PG_DATABASE=esl_batch
# PG_CONNECTION_STRING=postgresql://esl:esl@postgres:5432/esl_batch

# Redis (used for BullMQ queue)
REDIS_ENABLED=true
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=

# BullMQ queue name
BATCH_JOBS_QUEUE_NAME=esl-jobs


# Mail / SMTP (fully optional; disabled by default)
MAIL_ENABLED=false
MAIL_HOST=mailhog
MAIL_PORT=1025
MAIL_FROM=no-reply@example.local
MAIL_SECURE=false
# MAIL_USER=
# MAIL_PASSWORD=

# ESL Orchestrator / external services
# These are placeholders; replace with valid credentials when needed.
NOTION_TOKEN=changeme-notion-token
ELEVENLABS_API_KEY=changeme-elevenlabs
# Log level for backend logger (pino): trace | debug | info | warn | error | fatal | silent
LOG_LEVEL=info
# Optional TTS defaults (dialogue/monologue/auto)
# ELEVENLABS_TTS_MODE=auto
# ELEVENLABS_DIALOGUE_LANGUAGE=en
# ELEVENLABS_DIALOGUE_STABILITY=0.7
# ELEVENLABS_DIALOGUE_SEED=0

# AWS region for S3 operations
AWS_REGION=us-east-1

# Manifest store configuration:
# - Set to `filesystem` for local dev.
# - Set to `s3` (plus S3 bucket/credentials) for production.
ESL_PIPELINE_MANIFEST_STORE=filesystem
ESL_PIPELINE_MANIFEST_BUCKET=esl-pipeline
ESL_PIPELINE_MANIFEST_PREFIX=manifests/dev
ESL_PIPELINE_MANIFEST_ROOT=/workspace
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_PREFIX=audio/assignments

# Config provider:
# - local: use bundled configs.
# - http: use a remote config service (set endpoint + token).
ESL_PIPELINE_CONFIG_PROVIDER=local
# ESL_PIPELINE_CONFIG_ENDPOINT=https://config.example.com
# ESL_PIPELINE_CONFIG_TOKEN=changeme
