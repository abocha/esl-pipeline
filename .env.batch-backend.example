# Example env for local/dev with docker-compose.batch-backend.example.yml
# NOT FOR PRODUCTION. Override in staging/prod with secure values.

NODE_ENV=development

# HTTP
BATCH_BACKEND_HTTP_PORT=8080

# Local filesystem uploads (shared volume path)
FILESYSTEM_UPLOAD_DIR=/app/uploads

# Postgres (used for job metadata)
PG_ENABLED=true
PG_HOST=postgres
PG_PORT=5432
PG_USER=esl
PG_PASSWORD=esl
PG_DATABASE=esl_batch
# PG_CONNECTION_STRING=postgresql://esl:esl@postgres:5432/esl_batch

# Redis (used for BullMQ queue)
REDIS_ENABLED=true
REDIS_HOST=redis
REDIS_PORT=6379
# REDIS_PASSWORD=

# BullMQ queue name
BATCH_JOBS_QUEUE_NAME=esl-jobs

# MinIO (S3-compatible; optional; disabled by default for local dev)
MINIO_ENABLED=false
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET=esl-pipeline

# Mail / SMTP (fully optional; disabled by default)
MAIL_ENABLED=false
MAIL_HOST=mailhog
MAIL_PORT=1025
MAIL_FROM=no-reply@example.local
MAIL_SECURE=false
# MAIL_USER=
# MAIL_PASSWORD=

# ESL Orchestrator / external services
# These are placeholders; replace with valid credentials when needed.
NOTION_TOKEN=changeme-notion-token
ELEVENLABS_API_KEY=changeme-elevenlabs

# AWS/MinIO region for S3-compatible operations
AWS_REGION=us-east-1

# Manifest store configuration:
# - For dev, point at MinIO (S3 compatible).
# - In prod, point at AWS S3 or another provider.
# Manifest store:
# - Set to `filesystem` for local dev to avoid needing MinIO/S3.
# - Override to `s3` (plus S3_ENDPOINT/AWS creds) when remote manifests are required.
ESL_PIPELINE_MANIFEST_STORE=filesystem
ESL_PIPELINE_MANIFEST_BUCKET=esl-pipeline
ESL_PIPELINE_MANIFEST_PREFIX=manifests/dev
ESL_PIPELINE_MANIFEST_ROOT=/workspace
# S3_ENDPOINT=http://minio:9000

# Config provider:
# - local: use bundled configs.
# - http: use a remote config service (set endpoint + token).
ESL_PIPELINE_CONFIG_PROVIDER=local
# ESL_PIPELINE_CONFIG_ENDPOINT=https://config.example.com
# ESL_PIPELINE_CONFIG_TOKEN=changeme
